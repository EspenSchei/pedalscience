---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Button from "../../components/Button.astro";
import Card from "../../components/Card.astro";

const title = "Ernærings-kalkulator";
const description =
    "Hvor mye karbohydrater du bør innta per time basert på intensitet og varighet.";
---

<BaseLayout {title} {description}>
    <header class="mb-6">
        <h1 class="text-2xl font-semibold tracking-tight text-slate-900 sm:text-3xl">
            Ernærings-kalkulator
        </h1>

        <p class="mt-2 max-w-2xl text-sm text-slate-600">
            Velg intensitet og varighet. Kalkulatoren foreslår hvor mye karbo per time
            som fungerer godt for typiske sykkeløkter.
        </p>
    </header>

    <div class="mt-4 grid gap-6 md:grid-cols-2">
        <div class="space-y-4">
            <!-- Intensitet -->
            <div class="space-y-1 text-sm">
                <label for="zone">Intensitet</label>
                <select id="zone" class="w-full">
                    <option value="z2">Rolig (Z2)</option>
                    <option value="z3">Tempo (Z3)</option>
                    <option value="z4">Terskel (Z4)</option>
                    <option value="z5">Hard (Z5/VO₂)</option>
                </select>
            </div>

            <!-- Varighet -->
            <div class="space-y-1 text-sm">
                <label for="hours">Varighet (timer)</label>
                <input id="hours" type="number" step="0.1" value="3" class="w-full" />
                <p class="form-help">
                    Rund av til nærmeste halve time om du er usikker – det er bedre å ha litt
                    for mye enn litt for lite.
                </p>
            </div>

            <div class="form-actions">
                <Button id="calcBtn" variant="primary">
                    Beregn behov
                </Button>
            </div>
        </div>

        <Card title="Resultat">
            <div id="result" class="text-sm text-slate-600">
                Fyll inn data og trykk «Beregn».
            </div>
        </Card>
    </div>

    <script type="module">
        const result = document.getElementById("result");

        const intakePerZone = {
            z2: [30, 45],
            z3: [45, 60],
            z4: [60, 75],
            z5: [90, 110],
        };

        function calc() {
            const zone = document.getElementById("zone").value;
            const hours = Number(document.getElementById("hours").value) || 0;

            const [minG, maxG] = intakePerZone[zone];
            const totalMin = minG * hours;
            const totalMax = maxG * hours;

            result.innerHTML = `
        <p class="font-semibold text-slate-800">Anbefalt karboinntak:</p>
        <p class="text-slate-900">${minG}–${maxG} g per time</p>
        <p class="mt-3 font-semibold text-slate-800">Total mengde:</p>
        <p class="text-slate-900">${totalMin}–${totalMax} g</p>
      `;
        }

        document.getElementById("calcBtn").onclick = calc;
    </script>
</BaseLayout>